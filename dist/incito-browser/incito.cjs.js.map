{"version":3,"file":"incito.cjs.js","sources":["../../lib/incito-browser/utils.js","../../lib/util.js","../../lib/incito-browser/incito.js"],"sourcesContent":["export const formatUnit = (unit) => {\n    if (unit == null) {\n        return 0;\n    } else if (typeof unit === 'number') {\n        return unit + 'px';\n    } else if (typeof unit === 'string') {\n        return unit.replace('dp', 'px');\n    } else {\n        return 0;\n    }\n};\n\nexport const escapeAttrValue = (value) => {\n    if (typeof value === 'string') {\n        return value.replace(/\"/g, '&quot;');\n    }\n\n    return value;\n};\n\nexport const isDefinedStr = (value) =>\n    typeof value === 'string' && value.length > 0;\n\nexport const escapeHTML = (unsafe = '') =>\n    unsafe\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#039;');\n\nexport const getShadow = (view) => {\n    if (isDefinedStr(view.shadow_color)) {\n        const dx = typeof view.shadow_dx === 'number' ? view.shadow_dx : 0;\n        const dy = typeof view.shadow_dy === 'number' ? view.shadow_dy : 0;\n        const radius =\n            typeof view.shadow_radius === 'number' ? view.shadow_radius : 0;\n        const color = view.shadow_color;\n\n        return {\n            dx,\n            dy,\n            radius,\n            color\n        };\n    }\n};\n\nexport const getTransforms = (view) => {\n    const transforms = [];\n    const translateX = formatUnit(view.transform_translate_x);\n    const translateY = formatUnit(view.transform_translate_y);\n\n    if (translateX !== 0) {\n        transforms.push(`translateX(${translateX})`);\n    }\n\n    if (translateY !== 0) {\n        transforms.push(`translateY(${translateY})`);\n    }\n\n    if (\n        typeof view.transform_rotate === 'number' &&\n        view.transform_rotate !== 0\n    ) {\n        transforms.push(`rotate(${view.transform_rotate}deg)`);\n    }\n\n    if (\n        typeof view.transform_scale === 'number' &&\n        view.transform_scale !== 1\n    ) {\n        transforms.push(`scale(${view.transform_scale})`);\n    }\n\n    return transforms;\n};\n\nexport const parseSpans = (text, spans = []) => {\n    const result = [];\n\n    if (spans.length === 0) {\n        result.push({\n            text\n        });\n    } else if (spans[0].start > 0) {\n        result.push({\n            text: text.slice(0, spans[0].start)\n        });\n    }\n\n    spans.forEach((span, i) => {\n        const startIndex = span.start;\n        const endIndex = span.end;\n\n        result.push({\n            text: text.slice(startIndex, endIndex),\n            span\n        });\n\n        if (i === spans.length - 1) {\n            if (endIndex < text.length) {\n                result.push({\n                    text: text.slice(endIndex, text.length)\n                });\n            }\n        } else if (endIndex < spans[i + 1].start) {\n            result.push({\n                text: text.slice(endIndex, spans[i + 1].start)\n            });\n        }\n    });\n\n    return result;\n};\n\nexport const getTextShadow = (view) => {\n    if (isDefinedStr(view.text_shadow_color)) {\n        const dx =\n            typeof view.text_shadow_dx === 'number' ? view.text_shadow_dx : 0;\n        const dy =\n            typeof view.text_shadow_dy === 'number' ? view.text_shadow_dy : 0;\n        const radius =\n            typeof view.text_shadow_radius === 'number'\n                ? view.text_shadow_radius\n                : 0;\n        const color = view.text_shadow_color;\n\n        return {\n            dx,\n            dy,\n            radius,\n            color\n        };\n    }\n};\n\nexport const loadFonts = (fontAssets = {}) => {\n    const styleEl = document.createElement('style');\n\n    for (const key in fontAssets) {\n        const value = fontAssets[key];\n        const urls = value.src\n            .map(([, url]) => {\n                return `url('${url}')`;\n            })\n            .join(', ');\n\n        styleEl.appendChild(\n            document.createTextNode(\n                `@font-face { font-family: '${key}'; font-display: swap; src: ${urls}; }`\n            )\n        );\n    }\n\n    document.head.appendChild(styleEl);\n};\n","export function isBrowser() {\n    return typeof window === 'object' && typeof document === 'object';\n}\n\nexport function isNode() {\n    return typeof process === 'object';\n}\n\nexport function error(err, options) {\n    err.message = err.message || null;\n\n    if (typeof options === 'string') {\n        err.message = options;\n    } else if (typeof options === 'object' && options != null) {\n        for (let key in options) {\n            const value = options[key];\n            err[key] = value;\n        }\n\n        if (options.message != null) {\n            err.message = options.message;\n        }\n        if (options.code != null || options.message != null) {\n            err.code = options.code || options.name;\n        }\n        if (options.stack != null) {\n            err.stack = options.stack;\n        }\n    }\n\n    err.name = options?.name || err.name || err.code || 'Error';\n    err.time = new Date();\n\n    return err;\n}\n\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        const r = (Math.random() * 16) | 0;\n        const v = c === 'x' ? r : (r & 0x3) | 0x8;\n\n        return v.toString(16);\n    });\n}\n\nexport function getQueryParam(field, url) {\n    const href = url || window.location.href;\n    const reg = new RegExp('[?&]' + field + '=([^&#]*)', 'i');\n    const string = reg.exec(href);\n\n    if (string) {\n        return string[1];\n    }\n    return undefined;\n}\n\nexport function getRandomNumberBetween(from, to) {\n    return Math.floor(Math.random() * to) + from;\n}\n\nexport function getOS() {\n    let name = null;\n    const ua = window.navigator.userAgent;\n\n    if (ua.indexOf('Windows') > -1) {\n        name = 'Windows';\n    } else if (ua.indexOf('Mac') > -1) {\n        name = 'macOS';\n    } else if (ua.indexOf('X11') > -1) {\n        name = 'unix';\n    } else if (ua.indexOf('Linux') > -1) {\n        name = 'Linux';\n    } else if (ua.indexOf('iOS') > -1) {\n        name = 'iOS';\n    } else if (ua.indexOf('Android') > -1) {\n        name = 'Android';\n    }\n\n    return name;\n}\n\nexport function getDeviceCategory() {\n    let deviceCategory = 'desktop';\n\n    if (navigator.platform === 'iPod' || navigator.platform === 'iPhone') {\n        deviceCategory = 'mobile';\n    } else if (navigator.platform === 'iPad') {\n        deviceCategory = 'tablet';\n    } else if (\n        navigator.platform === 'Android' ||\n        /android/gi.test(navigator.userAgent)\n    ) {\n        if (/tablet/gi.test(navigator.userAgent)) {\n            deviceCategory = 'tablet';\n        } else {\n            deviceCategory = 'mobile';\n        }\n    }\n\n    return deviceCategory;\n}\n\nexport function getPointer() {\n    let pointer = 'fine';\n\n    if (matchMedia('(pointer:coarse)').matches) {\n        pointer = 'coarse';\n    }\n\n    return pointer;\n}\n\nexport function getOrientation(width, height) {\n    if (width === height) {\n        return 'quadratic';\n    } else if (width > height) {\n        return 'horizontal';\n    } else {\n        return 'vertical';\n    }\n}\n\nexport function getScreenDimensions() {\n    const density = window.devicePixelRatio ?? 1;\n    const logical = {\n        width: window.screen.width,\n        height: window.screen.height\n    };\n    const physical = {\n        width: Math.round(logical.width * density),\n        height: Math.round(logical.height * density)\n    };\n\n    return {\n        density,\n        logical,\n        physical\n    };\n}\n\nexport function getUtcOffsetSeconds() {\n    const now = new Date();\n    const jan1 = new Date(now.getFullYear(), 0, 1, 0, 0, 0, 0);\n    const tmp = jan1.toGMTString();\n    const jan2 = new Date(tmp.substring(0, tmp.lastIndexOf(' ') - 1));\n    const stdTimeOffset = (jan1 - jan2) / 1000;\n\n    return stdTimeOffset;\n}\n\nexport function getUtcDstOffsetSeconds() {\n    return new Date().getTimezoneOffset() * 60 * -1;\n}\n\nexport function getColorBrightness(color) {\n    color = color.replace('#', '');\n    var hex = parseInt((hex + '').replace(/[^a-f0-9]/gi, ''), 16);\n    const rgb = [];\n    let sum = 0;\n    let x = 0;\n\n    while (x < 3) {\n        const s = parseInt(color.substring(2 * x, 2), 16);\n        rgb[x] = s;\n\n        if (s > 0) {\n            sum += s;\n        }\n\n        ++x;\n    }\n\n    if (sum <= 381) {\n        return 'dark';\n    } else {\n        return 'light';\n    }\n}\n\nexport function btoa(str) {\n    if (isBrowser()) {\n        return window.btoa(str);\n    } else {\n        let buffer = null;\n\n        if (str instanceof Buffer) {\n            buffer = str;\n        } else {\n            buffer = Buffer.from(str.toString(), 'binary');\n        }\n\n        return buffer.toString('base64');\n    }\n}\n\nexport function chunk(arr, size) {\n    const results = [];\n\n    while (arr.length) {\n        results.push(arr.splice(0, size));\n    }\n\n    return results;\n}\n\nexport function throttle(fn, threshold = 250, scope) {\n    let last = undefined;\n    let deferTimer = undefined;\n\n    return function () {\n        const context = scope || this;\n        const now = new Date().getTime();\n        const args = arguments;\n\n        if (last && now < last + threshold) {\n            clearTimeout(deferTimer);\n\n            deferTimer = setTimeout(() => {\n                last = now;\n\n                fn.apply(context, args);\n            }, threshold);\n        } else {\n            last = now;\n            fn.apply(context, args);\n        }\n    };\n}\n\nexport function loadImage(src, callback) {\n    const img = new Image();\n\n    img.onload = () => callback(null, img.width, img.height);\n    img.onerror = () => callback(new Error());\n    img.src = src;\n\n    return img;\n}\n\nexport function distance(lat1, lng1, lat2, lng2) {\n    const radlat1 = (Math.PI * lat1) / 180;\n    const radlat2 = (Math.PI * lat2) / 180;\n    const theta = lng1 - lng2;\n    const radtheta = (Math.PI * theta) / 180;\n    let dist =\n        Math.sin(radlat1) * Math.sin(radlat2) +\n        Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n    dist = Math.acos(dist);\n    dist = (dist * 180) / Math.PI;\n    dist = dist * 60 * 1.1515;\n    dist = dist * 1.609344 * 1000;\n\n    return dist;\n}\n\nexport function closest(el, s) {\n    const matches =\n        Element.prototype.matches ||\n        Element.prototype.msMatchesSelector ||\n        Element.prototype.webkitMatchesSelector;\n\n    do {\n        if (matches.call(el, s)) return el;\n\n        el = el.parentElement || el.parentNode;\n    } while (el !== null && el.nodeType === 1);\n\n    return null;\n};\n\n// Method for wrapping a function that takes a callback in any position\n// to return promises if no callback is given in a call.\n// The second argument, cbParameterIndex, is the position of the callback in the original functions parameter list.\n// CoffeeScript optional parameters messes with this function arity detection,\n// not sure what to do about that, other than always setting cbParameterIndex at callsites.\nexport function promiseCallbackInterop(fun, cbParameterIndex = fun.length - 1) {\n    // This is the function that actually wraps and calls a method to return a promise.\n    const makePromise = (fun, cbParameterIndex, parameters) =>\n        new Promise((resolve, reject) => {\n            const neoCallback = (error, result) => {\n                if (error) {\n                    return reject(error);\n                }\n                return resolve(result);\n            };\n\n            const callParameters = [];\n            for (\n                let i = 0,\n                    end = Math.max(parameters.length, cbParameterIndex) + 1,\n                    asc = 0 <= end;\n                asc ? i < end : i > end;\n                asc ? i++ : i--\n            ) {\n                callParameters.push(\n                    i === cbParameterIndex ? neoCallback : parameters[i]\n                );\n            }\n\n            return fun.apply(this, callParameters);\n        });\n    // Wrapper function that decides what to do per-call.\n    return (...parameters) => {\n        if (typeof parameters[cbParameterIndex] === 'function') {\n            // Callback given, do a regular old call.\n            return fun.apply(null, parameters);\n        } else if (typeof Promise === 'function') {\n            // No callback given, and we have promise support, use makePromise to wrap the call.\n            return makePromise(fun, cbParameterIndex, parameters);\n        } else {\n            // Ain't got callback, ain't got promise support; we gotta tell the developer.\n            throw new Error(`To be able to use this asynchronous method you should:\nSupply a callback function as argument #${1 + cbParameterIndex}.\nThis callback function will be called with the method call response.\nAlternatively, when supported, it can return a Promise if no callback function is given.\\\n`);\n        }\n    };\n}\n","import MicroEvent from 'microevent';\nimport fetch from 'cross-fetch';\nimport './incito.styl';\nimport {\n    isDefinedStr,\n    formatUnit,\n    escapeHTML,\n    escapeAttrValue,\n    getShadow,\n    getTransforms,\n    parseSpans,\n    getTextShadow,\n    loadFonts\n} from './utils.js';\nimport {closest} from '../util.js';\n\nexport default class Incito extends MicroEvent {\n    constructor(containerEl, {incito = {}}) {\n        super();\n\n        this.containerEl = containerEl;\n        this.incito = incito;\n        this.el = document.createElement('div');\n        this.ids = {};\n        this.sections = [];\n        this.canLazyload = 'IntersectionObserver' in window;\n        this.render();\n    }\n\n    render() {\n        const theme = this.incito.theme || {};\n\n        loadFonts(this.incito.font_assets);\n\n        this.el.dataset.readme = 'Incito by Tjek (https://incito.io)';\n        this.el.className = 'incito';\n\n        if (Array.isArray(theme.font_family)) {\n            this.el.style.fontFamily = theme.font_family\n                .filter((v, i, a) => a.indexOf(v) === i)\n                .join(', ');\n        }\n\n        if (isDefinedStr(theme.background_color)) {\n            this.el.style.backgroundColor = theme.background_color;\n        }\n\n        if (isDefinedStr(theme.text_color)) {\n            this.el.style.color = theme.text_color;\n        }\n\n        if (isDefinedStr(theme.style)) {\n            this.styleEl = document.createElement('style');\n\n            this.styleEl.innerText = theme.style;\n\n            document.head.appendChild(this.styleEl);\n        }\n\n        if (typeof theme.line_spacing_multiplier === 'number') {\n            this.el.style.lineHeight = theme.line_spacing_multiplier;\n        }\n\n        // By setting the language we help the browser with stuff like hyphenation.\n        if (this.incito.locale != null) {\n            this.el.setAttribute('lang', this.incito.locale);\n        }\n\n        this.el.innerHTML = this.renderHtml(this.incito.root_view);\n\n        this.containerEl.appendChild(this.el);\n\n        if (this.canLazyload) {\n            this.enableLazyloading();\n        }\n    }\n\n    start() {\n        this.el.addEventListener('click', (e) => {\n            const el = closest(e.target, '.incito__view [data-link]');\n            const link = el ? el.dataset.link : null;\n\n            if (isDefinedStr(link)) {\n                window.open(link, '_blank');\n            }\n        });\n\n        if (this.canLazyload) {\n            this.observeElements(this.el);\n        }\n\n        this.trigger('started');\n    }\n\n    destroy() {\n        if (this.lazyObserver) {\n            this.lazyObserver.disconnect();\n        }\n\n        if (this.videoObserver) {\n            this.videoObserver.disconnect();\n        }\n\n        this.containerEl.removeChild(this.el);\n\n        if (this.styleEl) {\n            this.styleEl.parentNode.removeChild(this.styleEl);\n        }\n\n        this.trigger('destroyed');\n    }\n\n    observeElements(el) {\n        el.querySelectorAll('.incito--lazy').forEach((el) => {\n            this.lazyObserver.observe(el);\n        });\n        el\n            .querySelectorAll('.incito__video-view[data-autoplay=true]')\n            .forEach((el) => {\n                this.videoObserver.observe(el);\n            });\n    }\n\n    loadEl(el) {\n        if (el.tagName.toLowerCase() === 'video' && !el.dataset.isLazyloaded) {\n            const sourceEl = document.createElement('source');\n\n            sourceEl.setAttribute('src', el.dataset.src);\n            sourceEl.setAttribute('type', el.dataset.mime);\n\n            el.appendChild(sourceEl);\n            el.load();\n            el.dataset.isLazyloaded = true;\n        } else if (el.classList.contains('incito__incito-embed-view')) {\n            const url = el.dataset.src;\n            const method = el.dataset.method;\n            const body = el.dataset.body;\n\n            fetch(url, {\n                method: method || 'get',\n                body: body ? JSON.parse(unescape(body)) : null\n            })\n                .then((res) => {\n                    if (res.status === 200) {\n                        return res.json();\n                    }\n                })\n                .then((res) => {\n                    el.innerHTML = this.renderHtml(res);\n\n                    this.observeElements(el);\n                });\n        } else if (el.dataset.bg) {\n            el.style.backgroundImage = `url(${el.dataset.bg})`;\n        } else if (el.dataset.src) {\n            el.src = el.dataset.src;\n        }\n    }\n\n    enableLazyloading() {\n        this.lazyObserver = new IntersectionObserver(\n            (entries) => {\n                entries.forEach((entry) => {\n                    if (entry.isIntersecting) {\n                        this.loadEl(entry.target);\n                        this.lazyObserver.unobserve(entry.target);\n                    }\n                });\n            },\n            {\n                rootMargin: '500px 0px'\n            }\n        );\n        this.videoObserver = new IntersectionObserver(\n            (entries) => {\n                entries.forEach((entry) => {\n                    if (entry.isIntersecting) {\n                        const autoplayState =\n                            entry.target.dataset.autoplayState;\n\n                        this.loadEl(entry.target);\n                        this.lazyObserver.unobserve(entry.target);\n\n                        if (!autoplayState || autoplayState === 'paused') {\n                            entry.target.dataset.autoplayState = 'playing';\n                            entry.target.play();\n                        }\n                    } else if (!entry.target.paused) {\n                        entry.target.dataset.autoplayState = 'paused';\n                        entry.target.pause();\n                    }\n                });\n            },\n            {\n                threshold: 0.25\n            }\n        );\n    }\n\n    renderView(view) {\n        let tagName = 'div';\n        let contents;\n        const classNames = ['incito__view'];\n        const styles = {};\n        const attrs = {};\n\n        if (view.view_name === 'TextView') {\n            tagName = 'p';\n            classNames.push('incito__text-view');\n\n            const textStyles = (view.text_style || '').split('|');\n            let {text} = view;\n\n            if (Array.isArray(view.spans) && view.spans.length > 0) {\n                const parsedText = parseSpans(text, view.spans);\n\n                text = parsedText.map((item) => {\n                    const escapedText = escapeHTML(item.text || '');\n\n                    if (item.span?.name === 'link' && item.span.url != null) {\n                        return `<a href=\"${encodeURI(\n                            item.span.url\n                        )}\" rel=\"external\" target=\"_blank\">${escapedText}</a>`;\n                    }\n                    if (item.span?.name != null) {\n                        const spanName = item.span.name;\n\n                        return `<span data-name=\"${spanName}\">${escapedText}</span>`;\n                    }\n                    return escapedText;\n                });\n                text = text.join('');\n            } else {\n                text = escapeHTML(text);\n            }\n\n            if (view.text_prevent_widow) {\n                text = text\n                    .replace(/&nbsp;([^\\s]+)$/, ' $1')\n                    .replace(/\\s([^\\s]+)\\s*$/, '&nbsp;$1');\n            }\n\n            contents = text.replace(/\\n/g, '<br>');\n\n            if (\n                Array.isArray(view.font_family) &&\n                view.font_family.length > 0\n            ) {\n                styles['font-family'] = view.font_family.join(', ');\n            }\n\n            if (view.text_size != null) {\n                styles['font-size'] = `${view.text_size}px`;\n            }\n\n            if (view.line_spacing_multiplier != null) {\n                styles['line-height'] = view.line_spacing_multiplier;\n            }\n\n            if (view.text_color != null) {\n                styles.color = view.text_color;\n            }\n\n            if (textStyles.indexOf('bold') !== -1) {\n                styles['font-weight'] = 'bold';\n            }\n\n            if (textStyles.indexOf('italic') !== -1) {\n                styles['font-style'] = 'italic';\n            }\n\n            if (Array.isArray(view.text_decoration_line)) {\n                styles['text-decoration-line'] = view.text_decoration_line.join(\n                    ' '\n                );\n            }\n\n            const textShadow = getTextShadow(view);\n\n            if (isDefinedStr(view.text_shadow)) {\n                styles['text-shadow'] = view.text_shadow;\n            } else if (textShadow != null) {\n                styles[\n                    'text-shadow'\n                ] = `${textShadow.dx}px ${textShadow.dy}px ${textShadow.radius}px ${textShadow.color}`;\n            }\n\n            if (view.text_alignment === 'left') {\n                styles['text-align'] = 'left';\n            } else if (view.text_alignment === 'center') {\n                styles['text-align'] = 'center';\n            } else if (view.text_alignment === 'right') {\n                styles['text-align'] = 'right';\n            }\n\n            if (view.single_line === true || view.max_lines === 1) {\n                attrs['data-single-line'] = true;\n            } else if (typeof view.max_lines === 'number') {\n                styles.display = '-webkit-box';\n                styles['-webkit-line-clamp'] = view.max_lines;\n                styles['-webkit-box-orient'] = 'vertical';\n            }\n\n            if (view.text_all_caps === true) {\n                styles['text-transform'] = 'uppercase';\n            }\n        } else if (view.view_name === 'ImageView') {\n            tagName = 'img';\n            classNames.push('incito__image-view');\n\n            attrs.onerror = `this.style.display='none'`;\n\n            if (isDefinedStr(view.src)) {\n                if (this.canLazyload) {\n                    classNames.push('incito--lazy');\n\n                    attrs['data-src'] = view.src;\n                } else {\n                    attrs.src = view.src;\n                }\n            }\n\n            if (isDefinedStr(view.label)) {\n                attrs['alt'] = view.label;\n            }\n        } else if (view.view_name === 'VideoView') {\n            tagName = 'video';\n            classNames.push('incito__video-view');\n\n            attrs.muted = '';\n            attrs.playsinline = '';\n            attrs.preload = 'none';\n            attrs.poster = 'noposter';\n\n            if (this.canLazyload) {\n                attrs['data-src'] = view.src;\n                attrs['data-mime'] = view.mime;\n\n                if (view.autoplay === true) {\n                    attrs['data-autoplay'] = true;\n                }\n\n                if (view.controls === true) {\n                    attrs['controls'] = '';\n                }\n\n                if (view.loop === true) {\n                    attrs['loop'] = '';\n                }\n            } else {\n                attrs.src = view.src;\n                attrs.controls = '';\n            }\n\n            if (this.canLazyload) {\n                classNames.push('incito--lazy');\n            }\n        } else if (view.view_name === 'HTMLView') {\n            if (isDefinedStr(view.style)) {\n                view.style\n                    .trim()\n                    .split(';')\n                    .forEach((style) => {\n                        const [key, value] = style.trim().split(':');\n\n                        styles[key] = value;\n                    });\n            }\n        } else if (\n            view.view_name === 'VideoEmbedView' ||\n            view.view_name === 'HTMLEmbedView'\n        ) {\n            tagName = 'iframe';\n            classNames.push('incito__html-embed-view');\n\n            attrs.sandbox = 'allow-scripts allow-same-origin';\n            attrs.allowfullscreen = '';\n\n            if (this.canLazyload) {\n                classNames.push('incito--lazy');\n                attrs['data-src'] = view.src;\n            } else {\n                attrs.src = view.src;\n            }\n        } else if (view.view_name === 'IncitoEmbedView') {\n            classNames.push('incito__incito-embed-view');\n            \n            if (this.canLazyload) {\n                classNames.push('incito--lazy');\n\n                attrs['data-src'] = view.src;\n\n                if (view.method === 'get' || view.method === 'post') {\n                    attrs['data-method'] = view.method;\n                }\n\n                if (view.body) {\n                    attrs['data-body'] = escape(JSON.stringify(view.body));\n                }\n            }\n        } else if (view.view_name === 'AbsoluteLayout') {\n            classNames.push('incito__absolute-layout-view');\n        } else if (view.view_name === 'FlexLayout') {\n            const flexAlignItemModes = [\n                'stretch',\n                'center',\n                'flex-start',\n                'flex-end',\n                'baseline'\n            ];\n            const flexJustifyModes = [\n                'flex-start',\n                'flex-end',\n                'center',\n                'space-between',\n                'space-around'\n            ];\n            const flexDirectionModes = ['row', 'column'];\n\n            classNames.push('incito__flex-layout-view');\n\n            styles.display = 'flex';\n\n            if (\n                flexAlignItemModes.indexOf(view.layout_flex_align_items) !== -1\n            ) {\n                styles['align-items'] = view.layout_flex_align_items;\n                styles['ms-align-items'] = view.layout_flex_align_items;\n            }\n\n            if (\n                flexJustifyModes.indexOf(view.layout_flex_justify_content) !==\n                -1\n            ) {\n                styles['justify-content'] = view.layout_flex_justify_content;\n                styles['ms-flex-pack'] = view.layout_flex_justify_content;\n            }\n\n            if (flexDirectionModes.indexOf(view.layout_flex_direction) !== -1) {\n                styles['flex-direction'] = view.layout_flex_direction;\n                styles['ms-flex-direction'] = view.layout_flex_direction;\n            }\n        }\n\n        if (isDefinedStr(view.id)) {\n            attrs['data-id'] = escapeAttrValue(view.id);\n        }\n\n        if (isDefinedStr(view.role)) {\n            attrs['data-role'] = escapeAttrValue(view.role);\n        }\n\n        if (isDefinedStr(view.accessibility_label)) {\n            attrs['aria-label'] = escapeAttrValue(view.accessibility_label);\n        }\n\n        if (view.accessibility_hidden === true) {\n            attrs['aria-hidden'] = true;\n        }\n\n        if (Array.isArray(view.feature_labels)) {\n            const featureLabels = view.feature_labels.filter((featureLabel) =>\n                /^[a-z_-]{1,14}$/.test(featureLabel)\n            );\n\n            if (featureLabels.length) {\n                attrs['data-feature-labels'] = featureLabels.join(',');\n            }\n        }\n\n        if (isDefinedStr(view.title)) {\n            attrs['title'] = escapeAttrValue(view.title);\n        }\n\n        if (view.gravity) {\n            attrs['data-gravity'] = view.gravity;\n        }\n\n        if (isDefinedStr(view.link)) {\n            attrs['data-link'] = view.link;\n        }\n\n        if (view.layout_width === 'match_parent') {\n            styles.width = '100%';\n        } else if (view.layout_width === 'wrap_content') {\n            styles.display = 'inline-block';\n        } else if (view.layout_width != null) {\n            styles.width = formatUnit(view.layout_width);\n        }\n\n        if (view.layout_height === 'match_parent') {\n            styles.height = '100%';\n        } else if (view.layout_height === 'wrap_content') {\n            styles.height = 'auto';\n        } else if (view.layout_height != null) {\n            styles.height = formatUnit(view.layout_height);\n        }\n\n        if (view.min_width != null) {\n            styles['min-width'] = formatUnit(view.min_width);\n        }\n\n        if (view.max_width != null) {\n            styles['max-width'] = formatUnit(view.max_width);\n        }\n\n        if (view.min_height != null) {\n            styles['min-height'] = formatUnit(view.min_height);\n        }\n\n        if (view.max_height != null) {\n            styles['max-height'] = formatUnit(view.max_height);\n        }\n\n        if (view.layout_top != null) {\n            styles.top = formatUnit(view.layout_top);\n        }\n        if (view.layout_left != null) {\n            styles.left = formatUnit(view.layout_left);\n        }\n        if (view.layout_right != null) {\n            styles.right = formatUnit(view.layout_right);\n        }\n        if (view.layout_bottom != null) {\n            styles.bottom = formatUnit(view.layout_bottom);\n        }\n\n        if (view.background_color) {\n            styles['background-color'] = view.background_color;\n        }\n\n        if (isDefinedStr(view.background_image)) {\n            if (this.canLazyload) {\n                classNames.push('incito--lazy');\n\n                attrs['data-bg'] = view.background_image;\n            } else {\n                styles['background-image'] = `url(${view.background_image})`;\n            }\n        }\n\n        if (\n            ['repeat_x', 'repeat_y', 'repeat'].indexOf(\n                view.background_tile_mode\n            ) !== -1\n        ) {\n            styles['background-repeat'] = view.background_tile_mode.replace(\n                '_',\n                '-'\n            );\n        }\n\n        if (isDefinedStr(view.background_image_position)) {\n            styles[\n                'background-position'\n            ] = view.background_image_position.replace('_', ' ');\n        }\n\n        if (view.background_image_scale_type === 'center_crop') {\n            styles['background-size'] = 'cover';\n        } else if (view.background_image_scale_type === 'center_inside') {\n            styles['background-size'] = 'contain';\n        }\n\n        if (view.layout_margin != null) {\n            styles.margin = formatUnit(view.layout_margin);\n        }\n        if (view.layout_margin_top != null) {\n            styles['margin-top'] = formatUnit(view.layout_margin_top);\n        }\n        if (view.layout_margin_left != null) {\n            styles['margin-left'] = formatUnit(view.layout_margin_left);\n        }\n        if (view.layout_margin_right != null) {\n            styles['margin-right'] = formatUnit(view.layout_margin_right);\n        }\n        if (view.layout_margin_bottom != null) {\n            styles['margin-bottom'] = formatUnit(view.layout_margin_bottom);\n        }\n\n        if (view.padding != null) {\n            styles.padding = formatUnit(view.padding);\n        }\n        if (view.padding_top != null) {\n            styles['padding-top'] = formatUnit(view.padding_top);\n        }\n        if (view.padding_left != null) {\n            styles['padding-left'] = formatUnit(view.padding_left);\n        }\n        if (view.padding_right != null) {\n            styles['padding-right'] = formatUnit(view.padding_right);\n        }\n        if (view.padding_bottom != null) {\n            styles['padding-bottom'] = formatUnit(view.padding_bottom);\n        }\n\n        if (view.corner_radius != null) {\n            styles['border-radius'] = formatUnit(view.corner_radius);\n        }\n        if (view.corner_top_left_radius != null) {\n            styles['border-top-left-radius'] = formatUnit(\n                view.corner_top_left_radius\n            );\n        }\n        if (view.corner_top_right_radius != null) {\n            styles['border-top-right-radius'] = formatUnit(\n                view.corner_top_right_radius\n            );\n        }\n        if (view.corner_bottom_left_radius != null) {\n            styles['border-bottom-left-radius'] = formatUnit(\n                view.corner_bottom_left_radius\n            );\n        }\n        if (view.corner_bottom_right_radius != null) {\n            styles['border-bottom-right-radius'] = formatUnit(\n                view.corner_bottom_right_radius\n            );\n        }\n\n        // Clip children.\n        if (view.clip_children === false) {\n            styles['overflow'] = 'visible';\n        }\n\n        const shadow = getShadow(view);\n\n        if (shadow != null) {\n            styles[\n                'box-shadow'\n            ] = `${shadow.dx}px ${shadow.dy}px ${shadow.radius}px ${shadow.color}`;\n        }\n\n        const strokeStyles = ['solid', 'dotted', 'dashed'];\n\n        if (view.stroke_width != null) {\n            styles['border-width'] = formatUnit(view.stroke_width);\n        }\n        if (view.stroke_color != null) {\n            styles['border-color'] = view.stroke_color;\n        }\n        if (strokeStyles.indexOf(view.stroke_style) !== -1) {\n            styles['border-style'] = view.stroke_style;\n        }\n\n        if (view.stroke_top_width != null) {\n            styles['border-top-width'] = formatUnit(view.stroke_top_width);\n        }\n        if (view.stroke_top_color != null) {\n            styles['border-top-color'] = view.stroke_top_color;\n        }\n\n        if (view.stroke_left_width != null) {\n            styles['border-left-width'] = formatUnit(view.stroke_left_width);\n        }\n        if (view.stroke_left_color != null) {\n            styles['border-left-color'] = view.stroke_left_color;\n        }\n\n        if (view.stroke_right_width != null) {\n            styles['border-right-width'] = formatUnit(view.stroke_right_width);\n        }\n        if (view.stroke_right_color != null) {\n            styles['border-right-color'] = view.stroke_right_color;\n        }\n\n        if (view.stroke_bottom_width != null) {\n            styles['border-bottom-width'] = formatUnit(\n                view.stroke_bottom_width\n            );\n        }\n        if (view.stroke_bottom_color != null) {\n            styles['border-bottom-color'] = view.stroke_bottom_color;\n        }\n\n        if (typeof view.layout_flex_shrink === 'number') {\n            styles['flex-shrink'] = view.layout_flex_shrink;\n            styles['ms-flex-shrink'] = view.layout_flex_shrink;\n        }\n        if (typeof view.layout_flex_grow === 'number') {\n            styles['flex-grow'] = view.layout_flex_grow;\n            styles['ms-flex-grow'] = view.layout_flex_grow;\n        }\n        if (view.layout_flex_basis != null) {\n            styles['flex-basis'] = formatUnit(view.layout_flex_basis);\n            styles['ms-flex-basis'] = formatUnit(view.layout_flex_basis);\n        }\n\n        const transforms = getTransforms(view);\n\n        if (transforms.length > 0) {\n            styles.transform = transforms.join(' ');\n        }\n\n        // Transform origin.\n        if (\n            Array.isArray(view.transform_origin) &&\n            view.transform_origin.length === 2\n        ) {\n            styles['transform-origin'] = [\n                formatUnit(view.transform_origin[0]),\n                formatUnit(view.transform_origin[1])\n            ].join(' ');\n        }\n\n        return {\n            tagName,\n            contents,\n            classNames,\n            styles,\n            attrs\n        };\n    }\n\n    renderHtml(rootView) {\n        let html = '';\n        const iter = (view) => {\n            try {\n                const {\n                    tagName,\n                    contents,\n                    classNames,\n                    styles,\n                    attrs\n                } = this.renderView(view);\n\n                if (view.id != null && typeof view.meta === 'object') {\n                    this.ids[view.id] = view.meta;\n                }\n\n                if (view.role === 'section') {\n                    this.sections.push({\n                        id: view.id,\n                        meta: view.meta\n                    });\n                }\n\n                html += `<${tagName}`;\n                html += ` class=\"${classNames.join(' ')}\"`;\n\n                for (const key in attrs) {\n                    const value = attrs[key];\n\n                    html += ` ${key}=\"${value}\"`;\n                }\n\n                html += ' style=\"';\n\n                for (const key in styles) {\n                    const value = styles[key];\n\n                    html += `${key}:${value}; `;\n                }\n\n                html += '\"';\n\n                for (const key in attrs) {\n                    const value = attrs[key];\n\n                    html += ` ${key}=\"${value}\"`;\n                }\n\n                html += '>';\n\n                if (Array.isArray(view.child_views)) {\n                    view.child_views.forEach((childView) => {\n                        iter(childView);\n                    });\n                }\n\n                if (contents) {\n                    html += contents;\n                }\n\n                html += `</${tagName}>`;\n            } catch (error) {}\n        };\n\n        iter(rootView);\n\n        return html;\n    }\n}\n"],"names":["formatUnit","unit","replace","escapeAttrValue","value","isDefinedStr","length","escapeHTML","unsafe","getShadow","view","shadow_color","dx","shadow_dx","dy","shadow_dy","radius","shadow_radius","color","getTransforms","transforms","translateX","transform_translate_x","translateY","transform_translate_y","push","transform_rotate","transform_scale","parseSpans","text","spans","result","start","_sliceInstanceProperty","span","i","startIndex","endIndex","end","getTextShadow","text_shadow_color","text_shadow_dx","text_shadow_dy","text_shadow_radius","loadFonts","fontAssets","styleEl","document","createElement","key","urls","_mapInstanceProperty","src","url","join","appendChild","createTextNode","head","closest","el","s","matches","Element","prototype","msMatchesSelector","webkitMatchesSelector","call","parentElement","parentNode","nodeType","Incito","containerEl","incito","ids","sections","canLazyload","window","render","theme","font_assets","dataset","readme","className","_Array$isArray","font_family","style","fontFamily","_filterInstanceProperty","v","a","_indexOfInstanceProperty","background_color","backgroundColor","text_color","innerText","line_spacing_multiplier","lineHeight","locale","setAttribute","innerHTML","renderHtml","root_view","enableLazyloading","addEventListener","e","target","link","open","observeElements","trigger","lazyObserver","disconnect","videoObserver","removeChild","querySelectorAll","observe","tagName","toLowerCase","isLazyloaded","sourceEl","mime","load","classList","contains","method","body","fetch","JSON","parse","unescape","then","res","status","json","bg","backgroundImage","IntersectionObserver","entries","entry","isIntersecting","loadEl","unobserve","rootMargin","autoplayState","play","paused","pause","threshold","contents","classNames","styles","attrs","view_name","textStyles","text_style","split","parsedText","item","escapedText","name","encodeURI","spanName","text_prevent_widow","text_size","text_decoration_line","textShadow","text_shadow","text_alignment","single_line","max_lines","display","text_all_caps","onerror","label","muted","playsinline","preload","poster","autoplay","controls","loop","_trimInstanceProperty","sandbox","allowfullscreen","escape","_JSON$stringify","flexAlignItemModes","flexJustifyModes","flexDirectionModes","layout_flex_align_items","layout_flex_justify_content","layout_flex_direction","id","role","accessibility_label","accessibility_hidden","feature_labels","featureLabels","featureLabel","test","title","gravity","layout_width","width","layout_height","height","min_width","max_width","min_height","max_height","layout_top","top","layout_left","left","layout_right","right","layout_bottom","bottom","background_image","background_tile_mode","background_image_position","background_image_scale_type","layout_margin","margin","layout_margin_top","layout_margin_left","layout_margin_right","layout_margin_bottom","padding","padding_top","padding_left","padding_right","padding_bottom","corner_radius","corner_top_left_radius","corner_top_right_radius","corner_bottom_left_radius","corner_bottom_right_radius","clip_children","shadow","strokeStyles","stroke_width","stroke_color","stroke_style","stroke_top_width","stroke_top_color","stroke_left_width","stroke_left_color","stroke_right_width","stroke_right_color","stroke_bottom_width","stroke_bottom_color","layout_flex_shrink","layout_flex_grow","layout_flex_basis","transform","transform_origin","rootView","html","iter","renderView","meta","child_views","childView","error","MicroEvent"],"mappings":"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"}